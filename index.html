<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quran Cast</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&family=Cairo:wght@300;400;600;700;800;1000&display=swap"
        rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/player.css">
</head>

<body>

    <!-- Top Navigation - Desktop Only -->
    <nav class="navbar navbar-expand-lg fixed-top d-none d-md-block">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="media/images/logo.jpg" alt="Quran Cast Logo" width="40" height="40" class="rounded me-3">
            </a>

            <!-- Navigation Links -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#home">
                            <i class="bi bi-house-door me-2"></i> الرئيسية
                        </a>
                    </li>


                    <li class="nav-item">
                        <a class="nav-link" href="#azkar">
                            <i class="bi bi-clock me-2"></i> الاذكار
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="openQuranPlayer(); return false;">
                            <i class="bi bi-headphones me-2"></i>القرآن
                        </a>
                    </li>


                    <li class="nav-item">
                        <a class="nav-link" href="#radio">
                            <i class="bi bi-broadcast me-2"></i>الراديو
                        </a>
                    </li>

                </ul>

                <!-- Theme Toggle -->
                <div class="navbar-nav">
                    <button class="btn theme-toggle" onclick="toggleTheme()" title="تبديل الوضع المظلم">
                        <i class="bi bi-moon-stars-fill" id="themeIcon"></i>
                    </button>
                </div>

            </div>
        </div>
    </nav>


    <!-- Bottom Navigation Bar - Mobile Only -->
    <nav class="bottom-navbar">

        <div class="nav-item active" onclick="location.hash='#home'">
            <i class="bi bi-house-door-fill"></i>
            <span>الرئيسية</span>
        </div>


        <div class="nav-item" onclick="location.hash='#azkar'">
            <i class="bi bi-clock-fill"></i>
            <span>الاذكار</span>
        </div>

        <div class="nav-item" onclick="openQuranPlayer()">
            <i class="bi bi-book-half"></i>
            <span>القرآن</span>
        </div>


        <div class="nav-item" onclick="location.hash='#radio'">
            <i class="bi bi-broadcast"></i>
            <span>الراديو</span>
        </div>

        <div class="nav-item more-btn" onclick="toggleSidebar()">
            <i class="bi bi-list-stars"></i>
            <span>المزيد</span>
        </div>
    </nav>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <!-- Enhanced Sidebar (Hidden by default) -->
    <div class="sidebar enhanced-sidebar" id="sidebar" style="display: none;">
        <div class="sidebar-header">
            <div class="logo-section">

                <h4 class="app-name">Quran Cast</h4>
            </div>

        </div>
        <div class="sidebar-content">
            <div class="nav-section mb-4">
                <h6 class="nav-section-title">القائمة الرئيسية</h6>
                <a href="#" class="sidebar-nav-item active" onclick="showQuranModeModal(); return false;">
                    <i class="bi bi-book-open"></i>
                    <span>القرآن الكريم</span>
                    <i class="bi bi-chevron-left"></i>
                </a>
                <a href="prayer-qibla.html" class="sidebar-nav-item">
                    <i class="bi bi-clock"></i>
                    <span>الصلاة والقبلة</span>
                    <i class="bi bi-chevron-left"></i>
                </a>
                <a href="hadith.html" class="sidebar-nav-item">
                    <i class="bi bi-chat-quote"></i>
                    <span>الأحاديث</span>
                    <i class="bi bi-chevron-left"></i>
                </a>
                <a href="reading.html" class="sidebar-nav-item">
                    <i class="bi bi-book"></i>
                    <span>القراءة</span>
                    <i class="bi bi-chevron-left"></i>
                </a>
                <a href="player.html" class="sidebar-nav-item">
                    <i class="bi bi-ear"></i>
                    <span>المشغل</span>
                    <i class="bi bi-chevron-left"></i>
                </a>
            </div>

            <div class="nav-section mb-4">
                <h6 class="nav-section-title">إعدادات سريعة</h6>
                <button class="sidebar-nav-item" onclick="toggleTheme()">
                    <i class="bi bi-moon-stars"></i>
                    <span>تبديل الوضع</span>
                    <i class="bi bi-chevron-left"></i>
                </button>
            </div>


            <div class="nav-section mb-4">

                <button style="background-color: rgba(197, 7, 7, 0.212); " class="sidebar-nav-item"
                    onclick="toggleSidebar()">
                    <span> اغلاق</span>
                    <i class="bi bi-chevron-left"></i>
                </button>
            </div>



        </div>
    </div>


    <!-- Main Content -->
    <main class="container" style="margin-top: 10px;">
       
        <!-- Home Section -->
        <section id="section-home" class="spa-section" style="display: block;">

            <div id="home_section"></div>

        </section>


        <!-- Azkar Section -->
        <section id="section-azkar" class="spa-section" style="display: none;">

            <div id="azkar_section"></div>

        </section>


        <section id="section-reading" class="spa-section" style="display: none;">
            <div class="content text-center p-5 text-muted">وضع القراءة سيتم دمجه هنا.</div>
        </section>

        <section id="section-player" class="spa-section" style="display: none;">
            <div class="content text-center p-5 text-muted">المشغل سيتم دمجه هنا.</div>
        </section>

        <section id="section-radio" class="spa-section" style="display: none;">
            <div id="radio_section"></div>
        </section>
    </main>

    <!-- Floating Action Button for Mobile -->
    <button class="floating-player-btn" id="floatingPlayerBtn" onclick="showPlayer()" style="display: none;">
        <i class="bi bi-music-note"></i>
    </button>

    <!-- Float Button for Back to Top -->
    <button id="floatButton" class="float-button" onclick="scrollToTop()">
        <i class="bi bi-arrow-up"></i>
    </button>

    <!-- Radio Mini Player -->
    <div id="radioMiniPlayer" class="radio-mini-player">
        <div class="mini-player" onclick="openRadioPage()">
            <div class="mini-player-info">
                <div class="radio-mini-player-thumbnail">
                    <i class="bi bi-broadcast"></i>
                </div>
                <div class="radio-mini-player-text">
                    <h4 id="radioMiniTitle">اختر محطة إذاعية</h4>
                    <p id="radioMiniSubtitle">من القائمة</p>
                    <p id="radioMiniDescription" class="radio-mini-description"></p>
                </div>
            </div>
           

            <div class="mini-player-controls">
                   
                <button class="mini-player-btn" onclick="event.stopPropagation(); toggleRadioMiniPlay()" >
                    <i class="bi bi-play-circle-fill"></i>
                </button>
                
                <button style="color: rgb(116, 7, 7);" class="mini-player-btn" onclick="event.stopPropagation(); closeRadioMiniPlayer()" >
                    <i class="bi bi-x-circle"></i>
                </button>
            </div>


        </div>
    </div>

    <!-- Enhanced Footer -->
    <footer class="mt-3">
        <div class="text-center text-muted">
            <small>Quran Cast - تطبيق إسلامي شامل للمسلمين</small>
        </div>
    </footer>


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="js/prayer-qibla.js"></script>
    <script src="js/azkar.js"></script>
    <script src="js/home.js"></script>
    <script src="js/player.js"></script>
    <script src="js/radio.js"></script>



    <script>


        // Add click event listeners to Quran navigation items
        function showSectionByHash() {
            const hash = (location.hash || '#home').toLowerCase();
            const routes = {
                '#home': 'section-home',
                '#azkar': 'section-azkar',
                '#player': 'section-player',
                '#reading': 'section-reading',
                '#mushaf': 'section-mushaf',
                '#radio': 'section-radio'
            };
            const targetId = routes[hash] || 'section-home';
            document.querySelectorAll('.spa-section').forEach(sec => {
                sec.style.display = (sec.id === targetId) ? 'block' : 'none';
            });

            const items = document.querySelectorAll('.bottom-navbar .nav-item');
            items.forEach(item => item.classList.remove('active'));
            if (hash === '#home') items[0]?.classList.add('active');
            if (hash === '#azkar') items[1]?.classList.add('active');
            if (hash === '#radio') {
                items[3]?.classList.add('active');
                // Initialize radio page when shown
                console.log('Radio section selected, initializing...');
                if (typeof initializeRadioPage === 'function') {
                    console.log('initializeRadioPage function found, calling...');
                    initializeRadioPage();
                } else {
                    console.error('initializeRadioPage function not found!');
                }
            }
        }

        // Theme toggle function
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);

            updateThemeIcon(newTheme);
        }

        function updateThemeIcon(theme) {
            const themeIcon = document.getElementById('themeIcon');
            if (themeIcon) {
                if (theme === 'dark') {
                    themeIcon.className = 'bi bi-sun-fill';
                } else {
                    themeIcon.className = 'bi bi-moon-stars-fill';
                }
            }
        }

        // Load saved theme
        function loadSavedTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme === 'auto' ? (prefersDark ? 'dark' : 'light') : savedTheme;

            document.documentElement.setAttribute('data-theme', theme);
            updateThemeIcon(theme);
        }

        // Function to open Quran player directly
        function openQuranPlayer() {
            if (quranPlayer) {
                // Show the player container first
                const container = document.getElementById('quranPlayerContainer');
                if (container) {
                    container.style.display = 'block';
                    container.classList.remove('hide');
                    container.classList.add('show');
                }
                // Then expand it
                quranPlayer.toggleExpanded();
            } else {
                // If player is not initialized, wait for it and then open
                setTimeout(() => {
                    if (quranPlayer) {
                        const container = document.getElementById('quranPlayerContainer');
                        if (container) {
                            container.style.display = 'block';
                            container.classList.remove('hide');
                            container.classList.add('show');
                        }
                        quranPlayer.toggleExpanded();
                    } else {
                        // If still not initialized, try again
                        setTimeout(() => {
                            if (quranPlayer) {
                                const container = document.getElementById('quranPlayerContainer');
                                if (container) {
                                    container.style.display = 'block';
                                    container.classList.remove('hide');
                                    container.classList.add('show');
                                }
                                quranPlayer.toggleExpanded();
                            }
                        }, 500);
                    }
                }, 100);
            }
        }

        // Function to scroll to top
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Show/hide float button based on scroll position
        function toggleFloatButton() {
            const floatButton = document.getElementById('floatButton');
            if (window.scrollY > 300) {
                floatButton.style.display = 'block';
                floatButton.style.opacity = '1';
                floatButton.style.transform = 'translateY(0)';
            } else {
                floatButton.style.opacity = '0';
                floatButton.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    if (window.scrollY <= 300) {
                        floatButton.style.display = 'none';
                    }
                }, 300);
            }
        }

        window.addEventListener('hashchange', showSectionByHash);
        window.addEventListener('scroll', toggleFloatButton);
        document.addEventListener('DOMContentLoaded', function() {
            showSectionByHash();
            loadSavedTheme();
            toggleFloatButton();
        });
    </script>

</body>

</html>